<!-- Wappler include head-page="layouts/main" fontawesome_5="cdn" bootstrap5="local" is="dmx-app" id="ferramentas" appConnect="local" components="{dmxBootstrap5TableGenerator:{},dmxBootstrap5Collapse:{},dmxBootstrap5Modal:{},dmxTagify:{},dmxDataTraversal:{},dmxBootstrap5Navigation:{},dmxAnimateCSS:{},dmxLightbox:{},dmxBootbox5:{},dmxBootbox:{},dmxSummernote:{},dmxMediumEditor:{},dmxMediumEditorImageUpload:{},dmxGoogleMaps:{},dmxGoogleDirections:{},dmxFormatter:{},dmxGooglePlaces:{}}" jquery_slim_35="cdn" -->



<dmx-serverconnect id="sc_locais_read" url="/api/locais/read" dmx-param:categoria_id=""></dmx-serverconnect>
<div class="modal" id="modal_adicionar" is="dmx-bs5-modal" tabindex="-1" dmx-on:hide-bs-modal="form_adicionar.reset()">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Adicionar</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form is="dmx-serverconnect-form" id="form_adicionar" method="post" action="/api/locais/create" dmx-generator="bootstrap5" dmx-form-type="vertical" dmx-on:success="mainNotifications.success('Item criado com sucesso!');sc_locais_read.load({});modal_adicionar.hide()">






                    <div class="form-group mb-3">
                        <label for="inp_nome">Nome</label>
                        <input type="text" class="form-control" id="inp_nome" name="nome" aria-describedby="inp_nome_help" dmxorgdomid="d1987">
                    </div>
                    <div class="form-group mb-3" id="fg_localizacao">


                        <label for="inp_link">Localização</label>
                        <input id="text1" name="text1" type="text" class="form-control" is="dmx-google-autocomplete" country="BR" map="maps_adicionar_local" style="" move-map="true">

                        <div class="row">
                            <div class="col">
                                <dmx-google-maps id="maps_adicionar_local" scrollwheel="true" tilt="true" rotate-control="true" scale-control="true" fullscreen-control="true" zoom-control="true" maptype-control="true" address="Brasília Distrito Federal" zoom="13" streetview-control="true">
                                    <dmx-google-maps-marker id="marker_center" draggable="true" dmx-bind:address=""></dmx-google-maps-marker>
                                </dmx-google-maps><button id="btn_pin_map" class="btn style13 disabled btn-lg w-100"><i class="fas fa-map-pin fa-lg"></i></button>
                            </div>

                        </div><input id="input_latitude" name="latitude" class="form-control" dmx-bind:value="maps_adicionar_local.latitude" type="hidden">
                        <input id="input_longitude" name="longitude" class="form-control" dmx-bind:value="maps_adicionar_local.longitude" type="hidden">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="submit" class="btn btn-primary" dmx-on:click="form_adicionar.submit()">Salvar</button>
            </div>
        </div>
    </div>
</div>


<dmx-data-detail id="data_detail" dmx-bind:data="sc_locais_read.data.query" key="id">
    <div class="modal" id="modal_detalhar" is="dmx-bs5-modal" tabindex="-1">
        <div class="modal-dialog" role="document">
            <div class="modal-content">


                <div class="modal-header">
                    <h5 class="modal-title">{{data_detail.data.nome}}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <dmx-google-maps id="maps_locais" dmx-bind:latitude="data_detail.data.latitude" dmx-bind:longitude="data_detail.data.longitude" scrollwheel="true" tilt="true" rotate-control="true" scale-control="true" fullscreen-control="true" zoom-control="true" streetview-control="true" maptype-control="true" zoom="13">
                        <dmx-google-maps-marker id="marker1" dmx-bind:latitude="data_detail.data.latitude" dmx-bind:longitude="data_detail.data.longitude"></dmx-google-maps-marker>
                    </dmx-google-maps>

                </div>
                <div class="modal-footer">
                    <button id="btn_editar_ferramenta" class="btn btn-outline-primary btn-sm" dmx-on:click="modal_detalhar_ferramenta.hide();modal_editar_ferramenta.show()" data-bs-toggle="modal" data-bs-target="#modal_editar">
                        <i class="fas fa-edit"></i>
                        <br></button>
                    <button id="btn_deletar_ferramenta" class="btn btn-danger btn-sm" dmx-on:click="run({'bootbox.confirm':{message:'Tem certeza que deseja deletar este item?',buttons:{confirm:{label:'Deletar',className:'btn-danger'},cancel:{label:'Cancelar',className:'btn-secondary'}},title:'Esta ação é irreversível',then:{steps:[{serverConnect:{url:'/api/locais/delete',site:'SIP',params:{id:`data_detail.data.id`},name:'sc'}},{run:{action:`mainNotifications.info(\'Item deletado com sucesso!\');modal_detalhar.hide();sc_locais_read.load({})`}}]}}})"><i class="fas fa-trash"></i></button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="modal_editar" is="dmx-bs5-modal" tabindex="-1" dmx-on:hide-bs-modal="form_adicionar.reset()">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Editar</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form is="dmx-serverconnect-form" id="form_editar" method="post" action="/api/locais/update" dmx-generator="bootstrap5" dmx-form-type="vertical" dmx-on:success="mainNotifications.success('Item editado com sucesso!');sc_locais_read.load({});modal_editar.hide()">
                        <input id="input_editar_id" name="id" type="hidden" class="form-control" dmx-bind:value="data_detail.data.id" readonly="true">






                        <div class="form-group mb-3">
                            <label for="inp_editar_nome">Nome</label>
                            <input type="text" class="form-control" id="inp_editar_nome" name="nome" aria-describedby="inp_nome_help" dmxorgdomid="d1987" dmx-bind:value="data_detail.data.nome">
                        </div>
                        <div class="form-group mb-3" id="fg_localizacao1">


                            <label for="inp_link">Localização</label>
                            <input id="text2" name="text2" type="text" class="form-control" is="dmx-google-autocomplete" country="BR" map="maps_editar_local" style="" move-map="true">

                            <div class="row">
                                <div class="col">
                                    <dmx-google-maps id="maps_editar_local" scrollwheel="true" tilt="true" rotate-control="true" scale-control="true" fullscreen-control="true" zoom-control="true" maptype-control="true" address="Brasília Distrito Federal" zoom="13" streetview-control="true" dmx-bind:latitude="data_detail.data.latitude" dmx-bind:longitude="data_detail.data.longitude">
                                        <dmx-google-maps-marker id="marker_center1" draggable="true" dmx-bind:address=""></dmx-google-maps-marker>
                                    </dmx-google-maps><button id="btn_pin_map1" class="btn style13 disabled btn-lg w-100"><i class="fas fa-map-pin fa-lg"></i></button>
                                </div>

                            </div><input id="input_editar_latitude" name="latitude" class="form-control" dmx-bind:value="maps_editar_local.latitude" type="hidden">
                            <input id="input_editar_longitude" name="longitude" class="form-control" dmx-bind:value="maps_editar_local.longitude" type="hidden">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary" dmx-on:click="form_editar.submit()">Salvar</button>
                </div>
            </div>
        </div>
    </div>
</dmx-data-detail>
<div class="mt-5 container" style="">
    <div class="row">
        <div class="col align-self-center">
            <div class="d-flex align-items-center flex-wrap justify-content-between">

                <h1 class="fw-light">Ferramentas</h1>
                <button id="btn_adicionar" class="btn btn-primary ms-3" data-bs-target="#modal_adicionar" data-bs-toggle="modal">Adicionar</button>

            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="table-responsive">
                <table class="table table-striped table-hover table-borderless">
                    <tbody is="dmx-repeat" dmx-generator="bs5table" dmx-bind:repeat="sc_locais_read.data.query" id="tableRepeat2">
                        <tr>
                            <td dmx-text="nome" dmx-on:click="data_detail.select(id);data_detail.modal_detalhar.show()"></td>
                            <td style="width: 95px;" class="text-end">
                                <button id="btn_editar" class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#modal_editar" dmx-on:click="data_detail.select(id)"><i class="fas fa-edit"></i></button>
                                <button id="btn_deletar" class="btn btn-sm btn-danger" dmx-on:click="run({'bootbox.confirm':{message:'Tem certeza que deseja deletar este item?',title:'Esta ação é irreversível',buttons:{confirm:{label:'Deletar',className:'btn-danger'},cancel:{label:'Cancelar',className:'btn-secondary'}},then:{steps:[{serverConnect:{url:'/api/locais/delete',site:'SIP',params:{id:`id`},name:'sc'}},{run:{action:`mainNotifications.info(\'Item deletado com sucesso!\');sc_locais_read.load({})`}}]}}})"><i class="fas fa-trash"></i></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<meta name="ac:route" content="/ferramentas">