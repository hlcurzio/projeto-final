<!-- Wappler include head-page="layouts/main" fontawesome_5="cdn" bootstrap5="local" is="dmx-app" id="ferramentas" appConnect="local" components="{dmxBootstrap5TableGenerator:{},dmxBootstrap5Collapse:{},dmxBootstrap5Modal:{},dmxTagify:{},dmxDataTraversal:{},dmxBootstrap5Navigation:{},dmxAnimateCSS:{},dmxLightbox:{},dmxBootbox5:{},dmxBootbox:{},dmxSummernote:{},dmxMediumEditor:{},dmxMediumEditorImageUpload:{},dmxGoogleMaps:{},dmxGoogleDirections:{},dmxFormatter:{},dmxGooglePlaces:{}}" jquery_slim_35="cdn" -->



<dmx-serverconnect id="sc_usuarios_read" url="/api/usuarios/read" dmx-param:categoria_id=""></dmx-serverconnect>
<div class="modal" id="modal_adicionar" is="dmx-bs5-modal" tabindex="-1" dmx-on:hide-bs-modal="form_adicionar.reset()">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Adicionar</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form is="dmx-serverconnect-form" id="form_adicionar" method="post" action="/api/usuarios/create" dmx-generator="bootstrap5" dmx-form-type="vertical" dmx-on:success="mainNotifications.success('Item criado com sucesso!');sc_usuarios_read.load({});modal_adicionar.hide()">

                    <div class="form-group mb-3">
                        <label for="inp_firstname">Nome</label>
                        <input type="text" class="form-control" id="inp_firstname" name="firstname" aria-describedby="inp_firstname_help" dmxorgdomid="d340">
                    </div>
                    <div class="form-group mb-3">
                        <label for="inp_lastname">Sobrenome</label>
                        <input type="text" class="form-control" id="inp_lastname" name="lastname" aria-describedby="inp_lastname_help" dmxorgdomid="d344">
                    </div>
                    <div class="form-group mb-3">
                        <label for="inp_email">E-mail</label>
                        <input type="text" class="form-control" id="inp_email" name="email" aria-describedby="inp_email_help" dmxorgdomid="d348">
                    </div>
                    <div class="form-group mb-3">
                        <label for="inp_password">Senha</label>
                        <input type="password" class="form-control" id="inp_password" name="password" aria-describedby="inp_password_help" dmxorgdomid="d352">
                    </div>
                    <div class="form-group mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="1" id="checkbox_admin" name="admin" dmx-bind:checked="">
                            <label class="form-check-label" for="checkbox_admin">Administrador</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="submit" class="btn btn-primary" dmx-on:click="form_adicionar.submit()">Salvar</button>
            </div>
        </div>
    </div>
</div>


<dmx-data-detail id="data_detail" dmx-bind:data="sc_usuarios_read.data.query" key="userID">
    <div class="modal" id="modal_detalhar" is="dmx-bs5-modal" tabindex="-1">
        <div class="modal-dialog" role="document">
            <div class="modal-content">


                <div class="modal-header">
                    <h5 class="modal-title">{{data_detail.data.firstname+' '+data_detail.data.lastname}}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <table class="table">
                            <tbody dmx-generator="bs5table" dmx-populate="data_detail.data">
                                <tr>
                                    <th>Nome</th>
                                    <td dmx-text="data_detail.data.firstname"></td>
                                </tr>
                                <tr>
                                    <th>Sobrenome</th>
                                    <td dmx-text="data_detail.data.lastname"></td>
                                </tr>
                                <tr>
                                    <th>E-mail</th>
                                    <td dmx-text="data_detail.data.email"></td>
                                </tr>
                                <tr>
                                    <th>Administrador</th>
                                    <td>
                                        <input class="form-check-input position-static" type="checkbox" value="" id="input1" name="input1" dmx-bind:checked="data_detail.data.admin" readonly="true" disabled="true">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
                <div class="modal-footer">
                    <button id="btn_editar_ferramenta" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#modal_editar">
                        <i class="fas fa-edit"></i>
                        <br></button>
                    <button id="btn_deletar_ferramenta" class="btn btn-danger btn-sm" dmx-on:click="run({'bootbox.confirm':{message:'Tem certeza que deseja deletar este item?',buttons:{confirm:{label:'Deletar',className:'btn-danger'},cancel:{label:'Cancelar',className:'btn-secondary'}},title:'Esta ação é irreversível',then:{steps:[{serverConnect:{url:'/api/usuarios/delete',site:'SIP',params:{id:`data_detail.data.userID`},name:'sc'}},{run:{action:`mainNotifications.info(\'Item deletado com sucesso!\');modal_detalhar.hide();sc_usuarios_read.load({})`}}]}}})"><i class="fas fa-trash"></i></button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="modal_editar" is="dmx-bs5-modal" tabindex="-1" dmx-on:hide-bs-modal="form_adicionar.reset()">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Editar</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form is="dmx-serverconnect-form" id="form_editar" method="post" action="/api/usuarios/update" dmx-generator="bootstrap5" dmx-form-type="vertical" dmx-populate="data_detail.data" dmx-on:success="mainNotifications.success('Item editado com sucesso!');sc_usuarios_read.load({});modal_editar.hide()">
                        <input type="hidden" name="userID" id="inp_userID" dmx-bind:value="data_detail.data.userID">
                        <div class="form-group mb-3">
                            <label for="inp_firstname">Nome</label>
                            <input type="text" class="form-control" id="inp_firstname" name="firstname" dmx-bind:value="data_detail.data.firstname" aria-describedby="inp_firstname_help">
                        </div>
                        <div class="form-group mb-3">
                            <label for="inp_lastname">Sobrenome</label>
                            <input type="text" class="form-control" id="inp_lastname" name="lastname" dmx-bind:value="data_detail.data.lastname" aria-describedby="inp_lastname_help">
                        </div>
                        <div class="form-group mb-3">
                            <label for="inp_email">E-mail</label>
                            <input type="text" class="form-control" id="inp_email" name="email" dmx-bind:value="data_detail.data.email" aria-describedby="inp_email_help">
                        </div>
                        <div class="form-group mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="1" id="input_editar_admin" name="admin" dmx-bind:checked="data_detail.data.admin">
                                <label class="form-check-label" for="input_editar_admin">Administrador</label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary" dmx-on:click="form_editar.submit()">Salvar</button>
                </div>
            </div>
        </div>
    </div>
</dmx-data-detail>
<div class="mt-5 container" style="">
    <div class="row">
        <div class="col align-self-center">
            <div class="d-flex align-items-center flex-wrap justify-content-between">

                <h1 class="fw-light">Usuários</h1>
                <button id="btn_adicionar" class="btn btn-primary ms-3" data-bs-target="#modal_adicionar" data-bs-toggle="modal">Adicionar</button>

            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="table-responsive">
                <table class="table table-striped table-hover table-borderless">
                    <tbody is="dmx-repeat" dmx-generator="bs5table" dmx-bind:repeat="sc_usuarios_read.data.query" id="tableRepeat2">
                        <tr>
                            <td dmx-text="email+' '" dmx-on:click="data_detail.select(userID);data_detail.modal_detalhar.show()"></td>
                            <td style="width: 95px;" class="text-end">
                                <button id="btn_editar" class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#modal_editar" dmx-on:click="data_detail.select(userID)"><i class="fas fa-edit"></i></button>
                                <button id="btn_deletar" class="btn btn-sm btn-danger" dmx-on:click="run({'bootbox.confirm':{message:'Tem certeza que deseja deletar este item?',title:'Esta ação é irreversível',buttons:{confirm:{label:'Deletar',className:'btn-danger'},cancel:{label:'Cancelar',className:'btn-secondary'}},then:{steps:[{serverConnect:{url:'/api/usuarios/delete',site:'SIP',params:{id:`userID`},name:'sc'}},{run:{action:`mainNotifications.info(\'Item deletado com sucesso!\');sc_usuarios_read.load({})`}}]}}})"><i class="fas fa-trash"></i></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<meta name="ac:route" content="/usuarios">